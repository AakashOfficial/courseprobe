/*!
 * jQuery UI Core 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/category/ui-core/
 */
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){function b(b,d){var e,f,g,h=b.nodeName.toLowerCase();return"area"===h?(e=b.parentNode,f=e.name,!(!b.href||!f||"map"!==e.nodeName.toLowerCase())&&(g=a("img[usemap='#"+f+"']")[0],!!g&&c(g))):(/^(input|select|textarea|button|object)$/.test(h)?!b.disabled:"a"===h?b.href||d:d)&&c(b)}function c(b){return a.expr.filters.visible(b)&&!a(b).parents().addBack().filter(function(){return"hidden"===a.css(this,"visibility")}).length}a.ui=a.ui||{},a.extend(a.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),a.fn.extend({scrollParent:function(b){var c=this.css("position"),d="absolute"===c,e=b?/(auto|scroll|hidden)/:/(auto|scroll)/,f=this.parents().filter(function(){var b=a(this);return(!d||"static"!==b.css("position"))&&e.test(b.css("overflow")+b.css("overflow-y")+b.css("overflow-x"))}).eq(0);return"fixed"!==c&&f.length?f:a(this[0].ownerDocument||document)},uniqueId:function(){var a=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++a)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&a(this).removeAttr("id")})}}),a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(c){return!!a.data(c,b)}}):function(b,c,d){return!!a.data(b,d[3])},focusable:function(c){return b(c,!isNaN(a.attr(c,"tabindex")))},tabbable:function(c){var d=a.attr(c,"tabindex"),e=isNaN(d);return(e||d>=0)&&b(c,!e)}}),a("<a>").outerWidth(1).jquery||a.each(["Width","Height"],function(b,c){function d(b,c,d,f){return a.each(e,function(){c-=parseFloat(a.css(b,"padding"+this))||0,d&&(c-=parseFloat(a.css(b,"border"+this+"Width"))||0),f&&(c-=parseFloat(a.css(b,"margin"+this))||0)}),c}var e="Width"===c?["Left","Right"]:["Top","Bottom"],f=c.toLowerCase(),g={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+c]=function(b){return void 0===b?g["inner"+c].call(this):this.each(function(){a(this).css(f,d(this,b)+"px")})},a.fn["outer"+c]=function(b,e){return"number"!=typeof b?g["outer"+c].call(this,b):this.each(function(){a(this).css(f,d(this,b,!0,e)+"px")})}}),a.fn.addBack||(a.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}),a("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(a.fn.removeData=function(b){return function(c){return arguments.length?b.call(this,a.camelCase(c)):b.call(this)}}(a.fn.removeData)),a.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),a.fn.extend({focus:function(b){return function(c,d){return"number"==typeof c?this.each(function(){var b=this;setTimeout(function(){a(b).focus(),d&&d.call(b)},c)}):b.apply(this,arguments)}}(a.fn.focus),disableSelection:function(){var a="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(a+".ui-disableSelection",function(a){a.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(b){if(void 0!==b)return this.css("zIndex",b);if(this.length)for(var c,d,e=a(this[0]);e.length&&e[0]!==document;){if(c=e.css("position"),("absolute"===c||"relative"===c||"fixed"===c)&&(d=parseInt(e.css("zIndex"),10),!isNaN(d)&&0!==d))return d;e=e.parent()}return 0}}),a.ui.plugin={add:function(b,c,d){var e,f=a.ui[b].prototype;for(e in d)f.plugins[e]=f.plugins[e]||[],f.plugins[e].push([c,d[e]])},call:function(a,b,c,d){var e,f=a.plugins[b];if(f&&(d||a.element[0].parentNode&&11!==a.element[0].parentNode.nodeType))for(e=0;e<f.length;e++)a.options[f[e][0]]&&f[e][1].apply(a.element,c)}}});
;var mdf_range_update=false;var mdf_ajax_content_redraw_page=0;try{var mdf_woo_catalog_order_by=mdf_default_order_by;var mdf_woo_catalog_order=mdf_default_order;}catch(e){}
jQuery(function(){jQuery.fn.life=function(types,data,fn){jQuery(this.context).on(types,this.selector,data,fn);return this;};mdf_init();});function mdf_init(){if(!jQuery('#pn_html_buffer').length){jQuery('body').append('<div id="pn_html_buffer" class="mdf_info_popup" style="display: none;"></div>');jQuery('body').append('<div id="pn_html_buffer2" style="display: none;"></div>');}
mdf_hide_empty_blocks_titles();mdf_tooltip_init();mdf_init_checkboxes_scroll();mdf_init_selects();mdf_init_checkboxes();mdf_init_multislect_emulator();jQuery('.mdf_range_min').life('change',function(){var slider_id=jQuery(this).data('slider-id');mdf_range_update=true;jQuery("#"+slider_id).ionRangeSlider("update",{from:parseFloat(jQuery(this).val(),10)});mdf_range_update=false;mdf_ajax_content_redraw_page=0;});jQuery('.mdf_range_max').life('change',function(){var slider_id=jQuery(this).data('slider-id');mdf_range_update=true;jQuery("#"+slider_id).ionRangeSlider("update",{to:parseFloat(jQuery(this).val(),10)});mdf_range_update=false;mdf_ajax_content_redraw_page=0;});mdf_init_selects();jQuery('.mdf_taxonomy').life('change',function(){mdf_deinit_chosen_selects();var tax_name=jQuery(this).data('tax-name');jQuery(this).next('.mdf_taxonomy_child_container').show(200);var _this=this;var is_auto_submit=jQuery(this).parents('.mdf_input_container').hasClass('mdf_tax_auto_submit');var is_tax_ajax_autorecount=jQuery(this).parents('.mdf_input_container').hasClass('mdf_tax_ajax_autorecount');var slug=jQuery(this).parents('form').find('input[name="mdf[mdf_widget_options][slug]"]').val();var form=jQuery(this).parents('form');mdf_ajax_content_redraw_page=0;var data={action:"mdf_draw_term_childs",type:'select',tax_name:tax_name,mdf_parent_id:jQuery(this).val(),hide:jQuery(this).data('hide'),page_mdf:jQuery(this).parents('form').find('.hidden_page_mdf_for_ajax').val(),mdf_cat:jQuery(this).parents('form').find('input[name="mdf[mdf_widget_options][meta_data_filter_cat]"]').val(),slug:slug,is_auto_submit:is_auto_submit};jQuery.post(ajaxurl,data,function(content){if(is_auto_submit||is_tax_ajax_autorecount){jQuery(_this).next('.mdf_taxonomy_child_container').hide();}
jQuery(_this).next('.mdf_taxonomy_child_container').html(content);if(jQuery(_this).next('.mdf_taxonomy_child_container').next('.mdf_taxonomy_child_container2').length){jQuery(_this).next('.mdf_taxonomy_child_container').next('.mdf_taxonomy_child_container2').remove();}else{jQuery(_this).next('.mdf_taxonomy_child_container').next('.mdf_taxonomy_child_container').remove();}
if(!content){jQuery(_this).next('.mdf_taxonomy_child_container').hide().html(mdf_tax_loader);}
if(jQuery(_this).parents('.mdf_input_container').hasClass('mdf_tax_auto_submit')){jQuery(_this).parents('form').submit();}
if(jQuery(form).hasClass('mdf_ajax_auto_recount')){mdf_ajax_data_recount(jQuery(form).attr('id'),slug,false);}});return true;});jQuery('.mdf_taxonomy_checkbox').life('change',function(){var tax_name=jQuery(this).data('tax-name');var is_auto_submit=jQuery(this).parents('.mdf_input_container').hasClass('mdf_tax_auto_submit');var form=jQuery(this).parents('form');if(!jQuery(this).hasClass('mdf_has_childs')&&!jQuery(form).hasClass('mdf_ajax_auto_recount')){if(is_auto_submit){jQuery(this).parents('form').submit();}
return true;}
var _this=this;var term_id=jQuery(this).val();var slug=jQuery(this).parents('form').find('input[name="mdf[mdf_widget_options][slug]"]').val();mdf_ajax_content_redraw_page=0;if(jQuery(this).is(":checked")){jQuery(this).prev("input[type=hidden]").val(term_id);if(!show_tax_all_childs)
{if(mdf_use_custom_icheck){jQuery(_this).parent().parent().find('.mdf_taxonomy_child_container').show(200);}else{jQuery(_this).parent().find('.mdf_taxonomy_child_container').show(200);}
var data={action:"mdf_draw_term_childs",type:'checkbox',tax_name:tax_name,mdf_parent_id:term_id,hide:jQuery(this).data('hide'),page_mdf:jQuery(this).parents('form').find('.hidden_page_mdf_for_ajax').val(),mdf_cat:jQuery(this).parents('form').find('input[name="mdf[mdf_widget_options][meta_data_filter_cat]"]').val(),slug:slug,is_auto_submit:is_auto_submit};jQuery.post(ajaxurl,data,function(content){if(is_auto_submit){jQuery(_this).parent().find('.mdf_taxonomy_child_container').hide();}
if(mdf_use_custom_icheck){jQuery(_this).parent().parent().find('.mdf_taxonomy_child_container').html(content);mdf_init_checkboxes();}else{jQuery(_this).parent().find('.mdf_taxonomy_child_container').html(content);}
if(!content){jQuery(_this).parent().find('.mdf_taxonomy_child_container').hide().html(mdf_tax_loader);}
if(jQuery(_this).parents('.mdf_input_container').hasClass('mdf_tax_auto_submit')){jQuery(_this).parents('form').submit();}
if(jQuery(form).hasClass('mdf_ajax_auto_recount')){mdf_ajax_data_recount(jQuery(form).attr('id'),slug,false);}});}else{if(jQuery(_this).parents('.mdf_input_container').hasClass('mdf_tax_auto_submit')){jQuery(_this).parents('form').submit();}
if(jQuery(form).hasClass('mdf_ajax_auto_recount')){mdf_ajax_data_recount(jQuery(form).attr('id'),slug,false);}}}else{if(!show_tax_all_childs){if(mdf_use_custom_icheck){jQuery(_this).parent().parent().find('.mdf_taxonomy_child_container').hide().html(mdf_tax_loader);}else{jQuery(_this).parent().find('.mdf_taxonomy_child_container').hide().html(mdf_tax_loader);}}
if(jQuery(this).parents('.mdf_input_container').hasClass('mdf_tax_auto_submit')){jQuery(this).parents('form').submit();}
if(jQuery(form).hasClass('mdf_ajax_auto_recount')){mdf_ajax_data_recount(jQuery(form).attr('id'),slug,false);}}
return true;});try{jQuery('.mdf_widget_found_count span').html(mdf_found_totally);}catch(e){}
jQuery('.mdf_sort_panel_order_by').change(function(){var val=jQuery(this).val();if(val==0){val=mdf_default_order_by;}
var href=window.location.href;if(mdf_is_search_going==1){window.location.href=href+'&order_by='+val+'&order='+mdf_sort_order;}else{mdf_util_order_no_search(mdf_sort_order,val);return false;}});jQuery('.mdf_sort_panel_ordering').change(function(){var val=jQuery(this).val();var href=window.location.href;if(mdf_is_search_going==1){window.location.href=href+'&order_by='+mdf_order_by+'&order='+val;}else{mdf_util_order_no_search(val,mdf_order_by);return false;}});jQuery('.mdf_custom_filter_panel a').click(function(){var href=window.location.href;if(mdf_is_search_going==1){window.location.href=href+'&order_by='+jQuery(this).data('order-by')+'&order='+jQuery(this).data('order');}else{mdf_util_order_no_search(jQuery(this).data('order'),jQuery(this).data('order-by'));return false;}
return false;});jQuery('.mdf_front_toggle').life('click',function(){var condition=jQuery(this).data('condition');if(condition=='opened'){jQuery(this).removeClass('mdf_front_toggle_opened');jQuery(this).addClass('mdf_front_toggle_closed');jQuery(this).data('condition','closed');jQuery(this).text(mdf_toggle_open_sign);jQuery(this).parent().prev('.mdf_filter_post_blocks_toggles').val(2);}else{jQuery(this).addClass('mdf_front_toggle_opened');jQuery(this).removeClass('mdf_front_toggle_closed');jQuery(this).data('condition','opened');jQuery(this).text(mdf_toggle_close_sign);jQuery(this).parent().prev('.mdf_filter_post_blocks_toggles').val(1);}
if(jQuery(this).parent().next('.mdf_filter_section, .mdf_tax_filter_section').hasClass('mdf_front_toggle_closed_section')){jQuery(this).parent().next('.mdf_filter_section, .mdf_tax_filter_section').hide();jQuery(this).parent().next('.mdf_filter_section, .mdf_tax_filter_section').removeClass('mdf_front_toggle_closed_section');}
jQuery(this).parent().next('.mdf_filter_section, .mdf_tax_filter_section').toggle(500);return false;});jQuery('.mdf_widget_form, .mdf_shortcode_form').find('input').life('click',function(){jQuery(this).parents('form').find("input[type=submit]").removeProp('disabled');});jQuery('.mdf_widget_form, .mdf_shortcode_form').find('input').life('change',function(){jQuery(this).parents('form').find("input[type=submit]").removeProp('disabled');});jQuery('.mdf_widget_form, .mdf_shortcode_form').find('select').life('change',function(){jQuery(this).parents('form').find("input[type=submit]").removeProp('disabled');});jQuery('.mdf_filter_categories').life('change',function(){var term_id=jQuery(this).val();if(jQuery(this).parents('.widget-meta-data-filter').find('form').hasClass('mdf_ajax_content_redraw')){var s=jQuery('#mdf_results_by_ajax').data('shortcode');var old_mdf_cat=jQuery(this).parents('.widget-meta-data-filter').find('form').find('input[name="mdf[mdf_widget_options][meta_data_filter_cat]"]').val();s=s.replace('meta_data_filter_cat='+old_mdf_cat,'meta_data_filter_cat='+term_id);jQuery('#mdf_results_by_ajax').data('shortcode',s);}
jQuery(this).parents('.widget-meta-data-filter').find('form').find('input[name="mdf[mdf_widget_options][meta_data_filter_cat]"]').val(term_id);jQuery(this).parents('.widget-meta-data-filter').find('form').find('input[name="meta_data_filter_cat"]').val(term_id);mdf_ajax_data_recount(jQuery(this).parents('.widget-meta-data-filter').find('form').attr('id'),jQuery(this).data('slug'),true);});jQuery('form.mdf_ajax_content_redraw .mdf_textinput, form.mdf_ajax_auto_recount .mdf_textinput').keydown(function(e){if(e.keyCode==13){jQuery(this).blur();return false;}});remove_empty_mdf_taxonomy();}
function mdf_util_order_no_search(order,order_by){mdf_tmp_order=order;mdf_tmp_orderby=order_by;var form=jQuery('.mdf_search_form').eq(0);if(form.hasClass('mdf_ajax_content_redraw')){mdf_ajax_data_recount(form.attr('id'),form.data('slug'),false);}else{form.submit();}}
function remove_empty_mdf_taxonomy(){jQuery.each(jQuery('.mdf_widget_form select.mdf_taxonomy'),function(index,select){var len=jQuery(select).children('option').length;if(len<2){jQuery(select).parent().remove();}});}
function mdf_draw_ui_slider_items(act_without_button,uniqid){var items=jQuery(".ui_slider_item_"+uniqid);mdf_ajax_content_redraw_page=0;jQuery.each(items,function(key,item){var input=jQuery(item).next('input');mdf_init_range_sliders(item,input,act_without_button,uniqid);});}
function mdf_get_ui_slider_step(input){var step=jQuery(input).data('step');if(!step){step=Math.ceil(parseInt((jQuery(input).data('max')-jQuery(input).data('min'))/100,10));}
return step;}
function mdf_init_range_sliders(item,input,act_without_button,uniqid){try{var type=jQuery(input).data('type');jQuery(item).ionRangeSlider({min:jQuery(input).data('min'),max:jQuery(input).data('max'),from:jQuery(input).data('min-now'),to:jQuery(input).data('max-now'),type:type,prefix:jQuery(input).data('slider-prefix'),postfix:jQuery(input).data('slider-postfix'),prettify:jQuery(input).data('slider-prettify'),hideMinMax:false,hideFromTo:false,hasGrid:true,step:mdf_get_ui_slider_step(input),onFinish:function(ui){jQuery(input).val(ui.fromNumber+'^'+ui.toNumber);jQuery(input).parent().find('.mdf_range .mdf_range_min').val(ui.fromNumber);jQuery(input).parent().find('.mdf_range .mdf_range_max').val(ui.toNumber);if(act_without_button){jQuery("#meta_data_filter_"+uniqid).submit();}
if(jQuery("#meta_data_filter_"+uniqid).hasClass('mdf_ajax_auto_recount')){mdf_ajax_data_recount(jQuery("#meta_data_filter_"+uniqid).attr('id'),jQuery("#meta_data_filter_"+uniqid).data('slug'),false);}
return false;},onChange:function(ui){jQuery(input).val(ui.fromNumber+'^'+ui.toNumber);jQuery(input).parent().find('.mdf_range .mdf_range_min').val(ui.fromNumber);jQuery(input).parent().find('.mdf_range .mdf_range_max').val(ui.toNumber);jQuery(input).parents('form').find("input[type=submit]").removeProp('disabled');mdf_ajax_content_redraw_page=0;},onLoad:function(ui){if(mdf_range_update){jQuery(input).val(ui.fromNumber+'^'+ui.toNumber);jQuery(input).parent().find('.mdf_range .mdf_range_min').val(ui.fromNumber);jQuery(input).parent().find('.mdf_range .mdf_range_max').val(ui.toNumber);if(act_without_button){jQuery("#meta_data_filter_"+uniqid).submit();}
if(jQuery("#meta_data_filter_"+uniqid).hasClass('mdf_ajax_auto_recount')){mdf_ajax_data_recount(jQuery("#meta_data_filter_"+uniqid).attr('id'),jQuery("#meta_data_filter_"+uniqid).data('slug'),false);}
return false;}}});}catch(e){}}
function mdf_click_checkbox(_this){if(jQuery(_this).is(":checked")){jQuery(_this).prev("input[type=hidden]").val(1);jQuery(_this).next("input[type=hidden]").val(1);jQuery(_this).val(1);}else{jQuery(_this).prev("input[type=hidden]").val('~');jQuery(_this).next("input[type=hidden]").val('~');jQuery(_this).val('~');}
return true;}
function mdf_init_search_form(uniqid,slug,search_url,act_without_button,ajax_searching){if(act_without_button===1){jQuery("#meta_data_filter_"+uniqid+" .mdf_option_checkbox").life('change',function(){mdf_click_checkbox(this);jQuery("#meta_data_filter_"+uniqid).submit();return true;});jQuery("#meta_data_filter_"+uniqid+" .mdf_filter_select").life('change',function(){jQuery("#meta_data_filter_"+uniqid).submit();return true;});jQuery("#meta_data_filter_"+uniqid+" .mdf_textinput").life('change',function(){jQuery("#meta_data_filter_"+uniqid).submit();return true;});}else{jQuery("#meta_data_filter_"+uniqid+" .mdf_option_checkbox").unbind('click');jQuery("#meta_data_filter_"+uniqid+" .mdf_option_checkbox").unbind('change');jQuery("#meta_data_filter_"+uniqid+" .mdf_option_checkbox").life('change',function(){mdf_click_checkbox(this);if(ajax_searching){mdf_ajax_data_recount("meta_data_filter_"+uniqid,slug,false);}});jQuery("#meta_data_filter_"+uniqid+" .mdf_filter_select").unbind('change');jQuery("#meta_data_filter_"+uniqid+" .mdf_filter_select").life('change',function(){if(ajax_searching){mdf_ajax_data_recount("meta_data_filter_"+uniqid,slug,false);}});jQuery("#meta_data_filter_"+uniqid+" .mdf_textinput").life('change',function(){if(ajax_searching){mdf_ajax_data_recount("meta_data_filter_"+uniqid,slug,false);}});redraw_ajax_pagination(slug);}
mdf_draw_ui_slider_items(act_without_button,uniqid);mdf_init_submit_button(uniqid,slug,search_url);mdf_init_calendars(uniqid,act_without_button,ajax_searching,slug);}
function mdf_init_submit_button(uniqid,slug,search_url){var submit_mode='submit';var type='widget';var form_id="meta_data_filter_"+uniqid;if(jQuery("#"+form_id).hasClass('mdf_shortcode_form')){type='shortcode';shortcode_id=jQuery("#"+form_id).data('shortcode-id');}
jQuery('#'+form_id+' .mdf_reset_button').click(function(){submit_mode='reset';if(jQuery("#"+form_id).hasClass('mdf_ajax_content_redraw')){mdf_ajax_content_redraw_page=0;mdf_ajax_data_recount(form_id,slug,true);return;}
if(jQuery(this).attr('href')&&!jQuery("#"+form_id).hasClass('mdf_ajax_content_redraw')){var href=jQuery(this).attr('href');if(href.length>1){window.location=href;return;}}
jQuery("#"+form_id).submit();return false;});var is_ajaxed_reset=false;var is_in_popup=false;if(jQuery(this).parents('.advanced_wp_popup_content')){is_in_popup=true;is_ajaxed_reset=true;}
var shortcode_id=0;var widget_id=0;var sidebar_name="";var sidebar_id=0;if(type=='widget'){sidebar_name=jQuery("#"+form_id).data('sidebar-name');sidebar_id=jQuery("#"+form_id).data('sidebar-id');widget_id=jQuery("#"+form_id).data('widget-id');}
jQuery("#"+form_id).submit(function(){jQuery(this).find("input[type='submit'], .mdf_reset_button").replaceWith(mdf_tax_loader);jQuery("#"+form_id+" .mdf_one_moment_txt span").show();var mdf_widget_search_url=search_url+"slg="+slug+"&";mdf_show_stat_info_popup(lang_one_moment);var data={action:"mdf_encode_search_get_params",vars:jQuery(this).serialize(),mode:submit_mode,mdf_front_qtrans_lang:mdf_front_qtrans_lang,mdf_front_wpml_lang:mdf_front_wpml_lang,type:type,shortcode_id:shortcode_id,sidebar_id:sidebar_id,sidebar_name:sidebar_name,widget_id:widget_id,is_ajaxed_reset:is_ajaxed_reset};jQuery.post(ajaxurl,data,function(response){if(is_ajaxed_reset&&submit_mode=='reset'&&type=='shortcode'){if(response.indexOf('mdf_ajax_content_redraw')!=-1){var parent=jQuery("#"+form_id).parent('.mdf_shortcode_container');jQuery(parent).replaceWith('<div id="mdtf_replace_me"></div>');jQuery('#mdtf_replace_me').html(response);mdf_ajax_content_redraw_page=0;var f=jQuery('#mdtf_replace_me').find('.mdf_ajax_content_redraw').eq(0);jQuery(f).parent().unwrap();mdf_ajax_data_recount(jQuery(f).attr('id'),slug,false);}else{jQuery("#"+form_id).parents('.mdf_shortcode_container').replaceWith(response);mdf_init_selects();}}else{if(mdf_widget_search_url.substring(0,4)=='self'){mdf_widget_search_url=mdf_widget_search_url.replace('self',(mdf_current_page_url.length>0?mdf_current_page_url:window.location.href));}
if(mdf_widget_search_url.match(/\?/g).length>1){var index=mdf_widget_search_url.lastIndexOf('?');mdf_widget_search_url=mdf_widget_search_url.substr(0,index)+'&'+mdf_widget_search_url.substr(index+1);}
var redirect_url=mdf_widget_search_url+response;if(mdf_front_wpml_lang.length){}
if(mdf_front_qtrans_lang.length){redirect_url=redirect_url+'&lang='+mdf_front_qtrans_lang;}
if(mdf_tmp_order!=0&&mdf_tmp_orderby!=0){redirect_url+='&order_by='+mdf_tmp_orderby+'&order='+mdf_tmp_order;}
window.location=redirect_url;}});return false;});}
var mdf_ajax_lock=false;function mdf_ajax_data_recount(form_id,slug,simple_form_redraw){if(mdf_ajax_lock){return;}
mdf_ajax_lock=true;mdf_show_stat_info_popup(lang_one_moment);var type='widget';var shortcode_id=0;var widget_id=0;var sidebar_name="";var sidebar_id=0;if(jQuery("#"+form_id).hasClass('mdf_shortcode_form')){type='shortcode';shortcode_id=jQuery("#"+form_id).data('shortcode-id');}
if(type=='widget'){sidebar_id=jQuery("#"+form_id).data('sidebar-id');sidebar_name=jQuery("#"+form_id).data('sidebar-name');widget_id=jQuery("#"+form_id).data('widget-id');}
var mdf_ajax_content_redraw=false;if(jQuery("#"+form_id).hasClass('mdf_ajax_content_redraw')){mdf_ajax_content_redraw=true;}
var data={action:"mdf_get_ajax_auto_recount_data",vars:jQuery("#"+form_id).serialize(),slug:slug,type:type,shortcode_id:shortcode_id,sidebar_id:sidebar_id,sidebar_name:sidebar_name,widget_id:widget_id,mode:'submit',mdf_current_term_id:mdf_current_term_id,mdf_current_tax:mdf_current_tax,simple_form_redraw:(simple_form_redraw?1:0),mdf_front_qtrans_lang:mdf_front_qtrans_lang,mdf_front_wpml_lang:mdf_front_wpml_lang,mdf_ajax_content_redraw:mdf_ajax_content_redraw,shortcode_txt:jQuery('#mdf_results_by_ajax').data('shortcode'),content_redraw_page:mdf_ajax_content_redraw_page,mdf_tmp_order:mdf_tmp_order,mdf_tmp_orderby:mdf_tmp_orderby,mdf_is_search_going:mdf_is_search_going};mdf_is_search_going=1;if(mdf_ajax_content_redraw&&jQuery('#mdf_results_by_ajax').length){data.order_by=mdf_woo_catalog_order_by;data.order=mdf_woo_catalog_order;}
jQuery.post(ajaxurl,data,function(response){response=jQuery.parseJSON(response);mdf_hide_stat_info_popup();if(type=='shortcode'){jQuery("#"+form_id).parents('.mdf_shortcode_container').replaceWith(response.form);}else{jQuery('#pn_html_buffer2').html(response.form);var widget=jQuery('#pn_html_buffer2').find('.widget-meta-data-filter').clone();jQuery("#"+form_id).parents('.widget-meta-data-filter').replaceWith(response.form);jQuery('#pn_html_buffer2').html("");mdf_draw_ui_slider_items(false,jQuery(widget).find('form').data('unique-id'));mdf_hide_empty_blocks_titles();mdf_init_submit_button(jQuery(widget).find('form').data('unique-id'),slug,jQuery(widget).find('form').data('search-url'));}
remove_empty_mdf_taxonomy();mdf_tooltip_init();mdf_init_checkboxes_scroll();mdf_init_checkboxes();mdf_init_selects();mdf_init_multislect_emulator();mdf_ajax_lock=false;jQuery(".mdf_input_container").find('.mdf_taxonomy_child_container2').next('.mdf_taxonomy_child_container').remove();if(mdf_ajax_content_redraw&&jQuery('#mdf_results_by_ajax').length){jQuery('#mdf_results_by_ajax').html(response.content);jQuery('.woo-pagination').remove();redraw_ajax_pagination(slug);if(jQuery('.mdf_sort_panel_select').length){jQuery('.mdf_sort_panel_order_by').change(function(){var form_id=jQuery('.mdf_ajax_content_redraw.mdf_ajax_auto_recount').attr('id');mdf_woo_catalog_order_by=jQuery(this).val();mdf_ajax_data_recount(form_id,slug,false);});jQuery('.mdf_sort_panel_ordering').change(function(){var form_id=jQuery('.mdf_ajax_content_redraw.mdf_ajax_auto_recount').attr('id');mdf_woo_catalog_order=jQuery(this).val();mdf_ajax_data_recount(form_id,slug,false);});}
if(jQuery('.mdf_custom_filter_panel').length){jQuery('.mdf_custom_filter_panel a').life('click',function(){var form_id=jQuery('.mdf_ajax_content_redraw.mdf_ajax_auto_recount').attr('id');mdf_woo_catalog_order_by=jQuery(this).data('order-by');mdf_woo_catalog_order=jQuery(this).data('order');mdf_ajax_data_recount(form_id,slug,false);return false;});}}
jQuery('form.mdf_ajax_content_redraw .mdf_textinput, form.mdf_ajax_auto_recount .mdf_textinput').keydown(function(e){if(e.keyCode==13){jQuery(this).blur();return false;}});mdf_js_after_ajax_done();if(jQuery('form.woocommerce-ordering').length){jQuery('form.woocommerce-ordering').hide();}});}
function redraw_ajax_pagination(slug){var pagination_links=jQuery('#mdf_results_by_ajax .tw-pagination li a');jQuery.each(pagination_links,function(i,o){jQuery(o).click(function(){mdf_ajax_content_redraw_page=parseInt(jQuery(o).attr('title'),10);var form_id=jQuery('.mdf_ajax_content_redraw.mdf_ajax_auto_recount').attr('id');mdf_ajax_data_recount(form_id,slug,false);return false;});});if(jQuery('#mdf_results_by_ajax').data('animate')){var target=jQuery('#mdf_results_by_ajax').data('animate-target');if(jQuery(target).length)
{var top=jQuery(target).offset().top;jQuery('html,body').animate({scrollTop:top},577);return false;}}}
function mdf_hide_empty_blocks_titles(){var section=jQuery('.widget-meta-data-filter .mdf_filter_section');jQuery.each(section,function(index,value){var count=jQuery(value).find('table').find('tr').size();if(!count){jQuery(value).hide();jQuery(value).find('table').hide();jQuery(value).prev('h4.data-filter-section-title').hide();}});}
function mdf_tooltip_init(){try{jQuery('.mdf_tooltip').tooltipster({maxWidth:tooltip_max_width,animation:'fade',delay:200,theme:'tooltipster-'+mdf_tooltip_theme,touchDevices:false,trigger:'hover',contentAsHTML:true});}catch(e){}}

var mdf_use_custom_scroll_bar = false;
function mdf_init_checkboxes_scroll(){try{if(!mdf_use_custom_scroll_bar){return;}}catch(e){console.log('Just an info: '+e);}
try{jQuery(".mdf_filter_section_scrolled").mCustomScrollbar('destroy');jQuery(".mdf_filter_section_scrolled").mCustomScrollbar({scrollButtons:{enable:true},advanced:{updateOnContentResize:true,updateOnBrowserResize:true},theme:"dark-2",horizontalScroll:false,mouseWheel:true,scrollType:'pixels',contentTouchScroll:true});}catch(e){}}
function mdf_init_selects(){mdf_deinit_chosen_selects();try{if(mdf_use_chosen_js_w){jQuery(".mdf_widget_form select").chosen({disable_search_threshold:10});}
if(mdf_use_chosen_js_s){jQuery(".mdf_shortcode_container select").chosen({disable_search_threshold:10});}}catch(e){}}
function mdf_init_checkboxes(){try{if(mdf_use_custom_icheck==0){return;}
var selectors=".mdf_shortcode_form input, .mdf_widget_form input";jQuery(selectors).iCheck({checkboxClass:'icheckbox_'+icheck_skin.skin+'-'+icheck_skin.color,radioClass:'iradio_flat'});jQuery(selectors).on('ifChecked',function(event){if(jQuery(this).hasClass('mdf_option_checkbox')){jQuery(this).parent().prev("input[type=hidden]").val(1);jQuery(this).parent().next("input[type=hidden]").val(1);jQuery(this).val(1);}
jQuery(this).trigger('change');});jQuery(selectors).on('ifUnchecked',function(event){if(jQuery(this).hasClass('mdf_option_checkbox')){jQuery(this).parent().prev("input[type=hidden]").val('~');jQuery(this).parent().next("input[type=hidden]").val('~');jQuery(this).val('~');}
jQuery(this).trigger('change');});}catch(e){}}
function mdf_deinit_chosen_selects(){try{if(mdf_use_chosen_js_w){jQuery(".mdf_widget_form select").chosen('destroy').trigger("liszt:updated");}
if(mdf_use_chosen_js_s){jQuery(".mdf_shortcode_container select").chosen('destroy').trigger("liszt:updated");}}catch(e){}}
function mdf_show_stat_info_popup(text){if(mdtf_overlay_skin=='default'){jQuery("#pn_html_buffer").text(text);jQuery("#pn_html_buffer").fadeTo(200,0.9);}else{switch(mdtf_overlay_skin){case'loading-balls':case'loading-bars':case'loading-bubbles':case'loading-cubes':case'loading-cylon':case'loading-spin':case'loading-spinning-bubbles':case'loading-spokes':jQuery('body').plainOverlay('show',{progress:function(){return jQuery('<div id="woof_svg_load_container"><img style="height: 100%;width: 100%" src="'+mdf_plugin_url+'images/loading-master/'+mdtf_overlay_skin+'.svg" alt=""></div>');}});break;default:jQuery('body').plainOverlay('show',{duration:-1});break;}}}
function mdf_hide_stat_info_popup(){if(mdtf_overlay_skin=='default'){window.setTimeout(function(){jQuery("#pn_html_buffer").fadeOut(400);},500);}else{jQuery('body').plainOverlay('hide');}}
function mdf_init_calendars(uniqid,act_without_button,ajax_searching,slug){try{jQuery("#meta_data_filter_"+uniqid+" .mdf_calendar").datepicker({showWeek:true,firstDay:mdf_week_first_day,changeMonth:true,changeYear:true,showButtonPanel:true,onSelect:function(selectedDate,self){var date=new Date(parseInt(self.currentYear,10),parseInt(self.currentMonth,10),parseInt(self.currentDay,10),23,59,59);var mktime=(date.getTime()/1000);var css_class='mdf_calendar_from';if(jQuery(this).hasClass('mdf_calendar_from')){css_class='mdf_calendar_to';jQuery(this).parent().find('.'+css_class).datepicker("option","minDate",selectedDate);}else{jQuery(this).parent().find('.'+css_class).datepicker("option","maxDate",selectedDate);}
jQuery(this).prev('input[type=hidden]').val(mktime);if(ajax_searching){window.setTimeout(function(){mdf_ajax_data_recount("meta_data_filter_"+uniqid,slug,false);},300);}
if(act_without_button){window.setTimeout(function(){jQuery("#meta_data_filter_"+uniqid).submit();},300);}}});jQuery(".mdf_calendar").datepicker("option","dateFormat",mdf_calendar_date_format);jQuery(".mdf_calendar").datepicker("option","showAnim",'fadeIn');jQuery(".mdf_calendar").life('keyup',function(e){if(e.keyCode==8||e.keyCode==46){jQuery.datepicker._clearDate(this);jQuery(this).prev('input[type=hidden]').val("");}});jQuery(".mdf_calendar").each(function(){var mktime=parseInt(jQuery(this).prev('input[type=hidden]').val(),10);if(mktime>0){var date=new Date(mktime*1000);jQuery(this).datepicker('setDate',new Date(date));var css_class='mdf_calendar_from';var selectedDate=jQuery(this).datepicker('getDate');if(jQuery(this).hasClass('mdf_calendar_from')){css_class='mdf_calendar_to';jQuery(this).parent().find('.'+css_class).datepicker("option","minDate",selectedDate);}else{jQuery(this).parent().find('.'+css_class).datepicker("option","maxDate",selectedDate);}}});}catch(e){}}
function mdf_init_multislect_emulator(){jQuery(".dropdown dt a").on('click',function(){var is_visible=false;if(jQuery(this).parents('dl.dropdown').find('dd ul').css('display')!='none'){is_visible=true;}
jQuery('body dl.dropdown').find('dd ul').hide();if(!is_visible){jQuery(this).parents('dl.dropdown').find('dd ul').slideToggle('fast');}
return false;});jQuery(".dropdown dd ul li a").on('click',function(){jQuery(this).parents('dl.dropdown').find('dd ul').hide();return false;});jQuery(document).bind('click',function(e){var $clicked=jQuery(e.target);if(!$clicked.parents().hasClass("dropdown")){jQuery('body dl.dropdown').find('dd ul').hide();}});};jQuery(document).ready(function()
{jQuery(".cegg-price-alert-wrap form").submit(function(event)
{event.preventDefault();var $form=jQuery(this);var $wrap=$form.closest('.cegg-price-alert-wrap');var data=$form.serialize()+'&nonce='+ceggPriceAlert.nonce;$wrap.find('.cegg-price-loading-image').show();$wrap.find('.cegg-price-alert-result-error').hide();$form.find('input, button').prop("disabled",true);jQuery.ajax({url:ceggPriceAlert.ajaxurl+'?action=start_tracking',type:'post',dataType:'json',data:data,success:function(result){if(result.status=='success')
{$wrap.find('.cegg-price-alert-result-succcess').show();$wrap.find('.cegg-price-alert-result-succcess').html(result.message);$wrap.find('.cegg-price-loading-image').hide();}
else{$form.find('input, button').prop("disabled",false);$wrap.find('.cegg-price-alert-result-error').show();$wrap.find('.cegg-price-alert-result-error').html(result.message);$wrap.find('.cegg-price-loading-image').hide();}}});});});
;jQuery(document).ready(function(){jQuery("a.confirm").click(function(){return!!confirm(BP_Confirm.are_you_sure)})});
;function member_widget_click_handler(){jQuery(".widget div#members-list-options a").on("click",function(){var e=this;return jQuery(e).addClass("loading"),jQuery(".widget div#members-list-options a").removeClass("selected"),jQuery(this).addClass("selected"),jQuery.post(ajaxurl,{action:"widget_members",cookie:encodeURIComponent(document.cookie),_wpnonce:jQuery("input#_wpnonce-members").val(),"max-members":jQuery("input#members_widget_max").val(),filter:jQuery(this).attr("id")},function(t){jQuery(e).removeClass("loading"),member_widget_response(t)}),!1})}function member_widget_response(e){e=e.substr(0,e.length-1),"-1"!==(e=e.split("[[SPLIT]]"))[0]?jQuery(".widget ul#members-list").fadeOut(200,function(){jQuery(".widget ul#members-list").html(e[1]),jQuery(".widget ul#members-list").fadeIn(200)}):jQuery(".widget ul#members-list").fadeOut(200,function(){var t="<p>"+e[1]+"</p>";jQuery(".widget ul#members-list").html(t),jQuery(".widget ul#members-list").fadeIn(200)})}jQuery(document).ready(function(){member_widget_click_handler(),"undefined"!=typeof wp&&wp.customize&&wp.customize.selectiveRefresh&&wp.customize.selectiveRefresh.bind("partial-content-rendered",function(){member_widget_click_handler()})});
;function bp_get_querystring(n){var t=location.search.split(n+"=")[1];return t?decodeURIComponent(t.split("&")[0]):null}
;!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports?require("jquery"):jQuery)}(function(e){function n(e){return u.raw?e:encodeURIComponent(e)}function o(e){return u.raw?e:decodeURIComponent(e)}function i(e){return n(u.json?JSON.stringify(e):String(e))}function r(e){0===e.indexOf('"')&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return e=decodeURIComponent(e.replace(c," ")),u.json?JSON.parse(e):e}catch(e){}}function t(n,o){var i=u.raw?n:r(n);return e.isFunction(o)?o(i):i}var c=/\+/g,u=e.cookie=function(r,c,f){if(void 0!==c&&!e.isFunction(c)){if("number"==typeof(f=e.extend({},u.defaults,f)).expires){var a=f.expires,d=f.expires=new Date;d.setTime(+d+864e5*a)}return document.cookie=[n(r),"=",i(c),f.expires?"; expires="+f.expires.toUTCString():"",f.path?"; path="+f.path:"",f.domain?"; domain="+f.domain:"",f.secure?"; secure":""].join("")}for(var p=r?void 0:{},s=document.cookie?document.cookie.split("; "):[],m=0,x=s.length;m<x;m++){var v=s[m].split("="),k=o(v.shift()),l=v.join("=");if(r&&r===k){p=t(l,c);break}r||void 0===(l=t(l))||(p[k]=l)}return p};u.defaults={},e.removeCookie=function(n,o){return void 0!==e.cookie(n)&&(e.cookie(n,"",e.extend({},o,{expires:-1})),!e.cookie(n))}});
;!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports?require("jquery"):jQuery)}(function(e){function t(t){return e.isFunction(t)||"object"==typeof t?t:{top:t,left:t}}var n=e.scrollTo=function(t,n,o){return e(window).scrollTo(t,n,o)};return n.defaults={axis:"xy",duration:parseFloat(e.fn.jquery)>=1.3?0:1,limit:!0},n.window=function(){return e(window)._scrollable()},e.fn._scrollable=function(){return this.map(function(){var t=this;if(!(!t.nodeName||-1!==e.inArray(t.nodeName.toLowerCase(),["iframe","#document","html","body"])))return t;var n=(t.contentWindow||t).document||t.ownerDocument||t;return/webkit/i.test(navigator.userAgent)||"BackCompat"===n.compatMode?n.body:n.documentElement})},e.fn.scrollTo=function(o,r,i){return"object"==typeof r&&(i=r,r=0),"function"==typeof i&&(i={onAfter:i}),"max"===o&&(o=9e9),i=e.extend({},n.defaults,i),r=r||i.duration,i.queue=i.queue&&i.axis.length>1,i.queue&&(r/=2),i.offset=t(i.offset),i.over=t(i.over),this._scrollable().each(function(){function s(e){u.animate(l,r,i.easing,e&&function(){e.call(this,c,i)})}if(null!==o){var a,f=this,u=e(f),c=o,l={},d=u.is("html,body");switch(typeof c){case"number":case"string":if(/^([+-]=?)?\d+(\.\d+)?(px|%)?$/.test(c)){c=t(c);break}if(!(c=d?e(c):e(c,this)).length)return;case"object":(c.is||c.style)&&(a=(c=e(c)).offset())}var m=e.isFunction(i.offset)&&i.offset(f,c)||i.offset;e.each(i.axis.split(""),function(e,t){var o="x"===t?"Left":"Top",r=o.toLowerCase(),h="scroll"+o,p=f[h],y=n.max(f,t);if(a)l[h]=a[r]+(d?0:p-u.offset()[r]),i.margin&&(l[h]-=parseInt(c.css("margin"+o))||0,l[h]-=parseInt(c.css("border"+o+"Width"))||0),l[h]+=m[r]||0,i.over[r]&&(l[h]+=c["x"===t?"width":"height"]()*i.over[r]);else{var b=c[r];l[h]=b.slice&&"%"===b.slice(-1)?parseFloat(b)/100*y:b}i.limit&&/^\d+$/.test(l[h])&&(l[h]=l[h]<=0?0:Math.min(l[h],y)),!e&&i.queue&&(p!==l[h]&&s(i.onAfterFirst),delete l[h])}),s(i.onAfter)}}).end()},n.max=function(t,n){var o="x"===n?"Width":"Height",r="scroll"+o;if(!e(t).is("html,body"))return t[r]-e(t)[o.toLowerCase()]();var i="client"+o,s=t.ownerDocument.documentElement,a=t.ownerDocument.body;return Math.max(s[r],a[r])-Math.min(s[i],a[i])},n});
;function bp_init_activity(){jq.cookie("bp-activity-oldestpage",1,{path:"/",secure:"https:"===window.location.protocol}),void 0!==jq.cookie("bp-activity-filter")&&jq("#activity-filter-select").length&&jq('#activity-filter-select select option[value="'+jq.cookie("bp-activity-filter")+'"]').prop("selected",!0),void 0!==jq.cookie("bp-activity-scope")&&jq(".activity-type-tabs").length&&(jq(".activity-type-tabs li").each(function(){jq(this).removeClass("selected")}),jq("#activity-"+jq.cookie("bp-activity-scope")+", .item-list-tabs li.current").addClass("selected"))}function bp_init_objects(e){jq(e).each(function(t){void 0!==jq.cookie("bp-"+e[t]+"-filter")&&jq("#"+e[t]+"-order-select select").length&&jq("#"+e[t]+'-order-select select option[value="'+jq.cookie("bp-"+e[t]+"-filter")+'"]').prop("selected",!0),void 0!==jq.cookie("bp-"+e[t]+"-scope")&&jq("div."+e[t]).length&&(jq(".item-list-tabs li").each(function(){jq(this).removeClass("selected")}),jq("#"+e[t]+"-"+jq.cookie("bp-"+e[t]+"-scope")+", #object-nav li.current").addClass("selected"))})}function bp_filter_request(e,t,i,a,s,n,o,r,l){if("activity"===e)return!1;null===i&&(i="all"),jq.cookie("bp-"+e+"-scope",i,{path:"/",secure:"https:"===window.location.protocol}),jq.cookie("bp-"+e+"-filter",t,{path:"/",secure:"https:"===window.location.protocol}),jq.cookie("bp-"+e+"-extras",o,{path:"/",secure:"https:"===window.location.protocol}),jq(".item-list-tabs li").each(function(){jq(this).removeClass("selected")}),jq("#"+e+"-"+i+", #object-nav li.current").addClass("selected"),jq(".item-list-tabs li.selected").addClass("loading"),jq('.item-list-tabs select option[value="'+t+'"]').prop("selected",!0),"friends"!==e&&"group_members"!==e||(e="members"),bp_ajax_request&&bp_ajax_request.abort(),bp_ajax_request=jq.post(ajaxurl,{action:e+"_filter",cookie:bp_get_cookies(),object:e,filter:t,search_terms:s,scope:i,page:n,extras:o,template:l},function(e){if("pag-bottom"===r&&jq("#subnav").length){var t=jq("#subnav").parent();jq("html,body").animate({scrollTop:t.offset().top},"slow",function(){jq(a).fadeOut(100,function(){jq(this).html(e),jq(this).fadeIn(100)})})}else jq(a).fadeOut(100,function(){jq(this).html(e),jq(this).fadeIn(100)});jq(".item-list-tabs li.selected").removeClass("loading")})}function bp_activity_request(e,t){null!==e&&jq.cookie("bp-activity-scope",e,{path:"/",secure:"https:"===window.location.protocol}),null!==t&&jq.cookie("bp-activity-filter",t,{path:"/",secure:"https:"===window.location.protocol}),jq.cookie("bp-activity-oldestpage",1,{path:"/",secure:"https:"===window.location.protocol}),jq(".item-list-tabs li").each(function(){jq(this).removeClass("selected loading")}),jq("#activity-"+e+", .item-list-tabs li.current").addClass("selected"),jq("#object-nav.item-list-tabs li.selected, div.activity-type-tabs li.selected").addClass("loading"),jq('#activity-filter-select select option[value="'+t+'"]').prop("selected",!0),jq(".widget_bp_activity_widget h2 span.ajax-loader").show(),bp_ajax_request&&bp_ajax_request.abort(),bp_ajax_request=jq.post(ajaxurl,{action:"activity_widget_filter",cookie:bp_get_cookies(),_wpnonce_activity_filter:jq("#_wpnonce_activity_filter").val(),scope:e,filter:t},function(e){jq(".widget_bp_activity_widget h2 span.ajax-loader").hide(),jq("div.activity").fadeOut(100,function(){jq(this).html(e.contents),jq(this).fadeIn(100),bp_legacy_theme_hide_comments()}),void 0!==e.feed_url&&jq(".directory #subnav li.feed a, .home-page #subnav li.feed a").attr("href",e.feed_url),jq(".item-list-tabs li.selected").removeClass("loading")},"json")}function bp_legacy_theme_hide_comments(){var e,t,i,a=jq("div.activity-comments");if(!a.length)return!1;a.each(function(){jq(this).children("ul").children("li").length<5||(comments_div=jq(this),e=comments_div.parents("#activity-stream > li"),t=jq(this).children("ul").children("li"),i=" ",jq("#"+e.attr("id")+" li").length&&(i=jq("#"+e.attr("id")+" li").length),t.each(function(a){a<t.length-5&&(jq(this).hide(),a||jq(this).before('<li class="show-all"><a href="#'+e.attr("id")+'/show-all/">'+BP_DTheme.show_x_comments.replace("%d",i)+"</a></li>"))}))})}function checkAll(){var e,t=document.getElementsByTagName("input");for(e=0;e<t.length;e++)"checkbox"===t[e].type&&(""===$("check_all").checked?t[e].checked="":t[e].checked="checked")}function clear(e){if(e=document.getElementById(e)){var t=e.getElementsByTagName("INPUT"),i=e.getElementsByTagName("OPTION"),a=0;if(t)for(a=0;a<t.length;a++)t[a].checked="";if(i)for(a=0;a<i.length;a++)i[a].selected=!1}}function bp_get_cookies(){var e,t,i,a,s,n=document.cookie.split(";"),o={};for(e=0;e<n.length;e++)i=(t=n[e]).indexOf("="),a=jq.trim(unescape(t.slice(0,i))),s=unescape(t.slice(i+1)),0===a.indexOf("bp-")&&(o[a]=s);return encodeURIComponent(jq.param(o))}function bp_get_query_var(e,t){var i={};return(t=void 0===t?location.search.substr(1).split("&"):t.split("?")[1].split("&")).forEach(function(e){i[e.split("=")[0]]=e.split("=")[1]&&decodeURIComponent(e.split("=")[1])}),!(!i.hasOwnProperty(e)||null==i[e])&&i[e]}var jq=jQuery,bp_ajax_request=null,newest_activities="",activity_last_recorded=0;jq(document).ready(function(){"-1"===window.location.search.indexOf("new")&&jq("div.forums").length?jq("#new-topic-post").hide():jq("#new-topic-post").show(),bp_init_activity();var e=["members","groups","blogs","forums","group_members"],t=jq("#whats-new");if(bp_init_objects(e),t.length&&bp_get_querystring("r")){var i=t.val();jq("#whats-new-options").slideDown(),t.animate({height:"3.8em"}),jq.scrollTo(t,500,{offset:-125,easing:"swing"}),t.val("").focus().val(i)}else jq("#whats-new-options").hide();if(t.focus(function(){jq("#whats-new-options").slideDown(),jq(this).animate({height:"3.8em"}),jq("#aw-whats-new-submit").prop("disabled",!1),jq(this).parent().addClass("active"),jq("#whats-new-content").addClass("active");var e=jq("form#whats-new-form"),t=jq("#activity-all");e.hasClass("submitted")&&e.removeClass("submitted"),t.length&&(t.hasClass("selected")?"-1"!==jq("#activity-filter-select select").val()&&(jq("#activity-filter-select select").val("-1"),jq("#activity-filter-select select").trigger("change")):(jq("#activity-filter-select select").val("-1"),t.children("a").trigger("click")))}),jq("#whats-new-form").on("focusout",function(e){var i=jq(this);setTimeout(function(){if(!i.find(":hover").length){if(""!==t.val())return;t.animate({height:"2.2em"}),jq("#whats-new-options").slideUp(),jq("#aw-whats-new-submit").prop("disabled",!0),jq("#whats-new-content").removeClass("active"),t.parent().removeClass("active")}},0)}),jq("#aw-whats-new-submit").on("click",function(){var e,t=0,i=jq(this),a=i.closest("form#whats-new-form"),s={};return jq.each(a.serializeArray(),function(e,t){"_"!==t.name.substr(0,1)&&"whats-new"!==t.name.substr(0,9)&&(s[t.name]?jq.isArray(s[t.name])?s[t.name].push(t.value):s[t.name]=new Array(s[t.name],t.value):s[t.name]=t.value)}),a.find("*").each(function(){(jq.nodeName(this,"textarea")||jq.nodeName(this,"input"))&&jq(this).prop("disabled",!0)}),jq("div.error").remove(),i.addClass("loading"),i.prop("disabled",!0),a.addClass("submitted"),object="",item_id=jq("#whats-new-post-in").val(),content=jq("#whats-new").val(),firstrow=jq("#buddypress ul.activity-list li").first(),activity_row=firstrow,timestamp=null,firstrow.length&&(activity_row.hasClass("load-newest")&&(activity_row=firstrow.next()),timestamp=activity_row.prop("class").match(/date-recorded-([0-9]+)/)),timestamp&&(t=timestamp[1]),item_id>0&&(object=jq("#whats-new-post-object").val()),e=jq.extend({action:"post_update",cookie:bp_get_cookies(),_wpnonce_post_update:jq("#_wpnonce_post_update").val(),content:content,object:object,item_id:item_id,since:t,_bp_as_nonce:jq("#_bp_as_nonce").val()||""},s),jq.post(ajaxurl,e,function(e){if(a.find("*").each(function(){(jq.nodeName(this,"textarea")||jq.nodeName(this,"input"))&&jq(this).prop("disabled",!1)}),e[0]+e[1]==="-1")a.prepend(e.substr(2,e.length)),jq("#"+a.attr("id")+" div.error").hide().fadeIn(200);else{if(0===jq("ul.activity-list").length&&(jq("div.error").slideUp(100).remove(),jq("#message").slideUp(100).remove(),jq("div.activity").append('<ul id="activity-stream" class="activity-list item-list">')),firstrow.hasClass("load-newest")&&firstrow.remove(),jq("#activity-stream").prepend(e),t||jq("#activity-stream li:first").addClass("new-update just-posted"),0!==jq("#latest-update").length){var i=jq("#activity-stream li.new-update .activity-content .activity-inner p").html(),s=jq("#activity-stream li.new-update .activity-content .activity-header p a.view").attr("href"),n="";""!==jq("#activity-stream li.new-update .activity-content .activity-inner p").text()&&(n=i+" "),n+='<a href="'+s+'" rel="nofollow">'+BP_DTheme.view+"</a>",jq("#latest-update").slideUp(300,function(){jq("#latest-update").html(n),jq("#latest-update").slideDown(300)})}jq("li.new-update").hide().slideDown(300),jq("li.new-update").removeClass("new-update"),jq("#whats-new").val(""),a.get(0).reset(),newest_activities="",activity_last_recorded=0}jq("#whats-new-options").slideUp(),jq("#whats-new-form textarea").animate({height:"2.2em"}),jq("#aw-whats-new-submit").prop("disabled",!0).removeClass("loading"),jq("#whats-new-content").removeClass("active")}),!1}),jq("div.activity-type-tabs").on("click",function(e){var t,i,a=jq(e.target).parent();if("STRONG"===e.target.nodeName||"SPAN"===e.target.nodeName)a=a.parent();else if("A"!==e.target.nodeName)return!1;return jq.cookie("bp-activity-oldestpage",1,{path:"/",secure:"https:"===window.location.protocol}),t=a.attr("id").substr(9,a.attr("id").length),i=jq("#activity-filter-select select").val(),"mentions"===t&&jq("#"+a.attr("id")+" a strong").remove(),bp_activity_request(t,i),!1}),jq("#activity-filter-select select").change(function(){var e,t=jq("div.activity-type-tabs li.selected"),i=jq(this).val();return e=t.length?t.attr("id").substr(9,t.attr("id").length):null,bp_activity_request(e,i),!1}),jq("div.activity").on("click",function(e){var t,i,a,s,n,o,r,l,c,d,p=jq(e.target);return p.hasClass("fav")||p.hasClass("unfav")?!p.hasClass("loading")&&(t=p.hasClass("fav")?"fav":"unfav",i=p.closest(".activity-item"),a=i.attr("id").substr(9,i.attr("id").length),r=bp_get_query_var("_wpnonce",p.attr("href")),p.addClass("loading"),jq.post(ajaxurl,{action:"activity_mark_"+t,cookie:bp_get_cookies(),id:a,nonce:r},function(e){p.removeClass("loading"),p.fadeOut(200,function(){jq(this).html(e),jq(this).attr("title","fav"===t?BP_DTheme.remove_fav:BP_DTheme.mark_as_fav),jq(this).fadeIn(200)}),"fav"===t?(jq(".item-list-tabs #activity-favs-personal-li").length||(jq(".item-list-tabs #activity-favorites").length||jq(".item-list-tabs ul #activity-mentions").before('<li id="activity-favorites"><a href="#">'+BP_DTheme.my_favs+" <span>0</span></a></li>"),jq(".item-list-tabs ul #activity-favorites span").html(Number(jq(".item-list-tabs ul #activity-favorites span").html())+1)),p.removeClass("fav"),p.addClass("unfav")):(p.removeClass("unfav"),p.addClass("fav"),jq(".item-list-tabs ul #activity-favorites span").html(Number(jq(".item-list-tabs ul #activity-favorites span").html())-1),Number(jq(".item-list-tabs ul #activity-favorites span").html())||(jq(".item-list-tabs ul #activity-favorites").hasClass("selected")&&bp_activity_request(null,null),jq(".item-list-tabs ul #activity-favorites").remove())),"activity-favorites"===jq(".item-list-tabs li.selected").attr("id")&&p.closest(".activity-item").slideUp(100)}),!1):p.hasClass("delete-activity")?(s=p.parents("div.activity ul li"),n=s.attr("id").substr(9,s.attr("id").length),o=p.attr("href"),r=o.split("_wpnonce="),l=s.prop("class").match(/date-recorded-([0-9]+)/),r=r[1],p.addClass("loading"),jq.post(ajaxurl,{action:"delete_activity",cookie:bp_get_cookies(),id:n,_wpnonce:r},function(e){e[0]+e[1]==="-1"?(s.prepend(e.substr(2,e.length)),s.children("#message").hide().fadeIn(300)):(s.slideUp(300),l&&activity_last_recorded===l[1]&&(newest_activities="",activity_last_recorded=0))}),!1):p.hasClass("spam-activity")?(s=p.parents("div.activity ul li"),l=s.prop("class").match(/date-recorded-([0-9]+)/),p.addClass("loading"),jq.post(ajaxurl,{action:"bp_spam_activity",cookie:encodeURIComponent(document.cookie),id:s.attr("id").substr(9,s.attr("id").length),_wpnonce:p.attr("href").split("_wpnonce=")[1]},function(e){e[0]+e[1]==="-1"?(s.prepend(e.substr(2,e.length)),s.children("#message").hide().fadeIn(300)):(s.slideUp(300),l&&activity_last_recorded===l[1]&&(newest_activities="",activity_last_recorded=0))}),!1):p.parent().hasClass("load-more")?(bp_ajax_request&&bp_ajax_request.abort(),jq("#buddypress li.load-more").addClass("loading"),null===jq.cookie("bp-activity-oldestpage")&&jq.cookie("bp-activity-oldestpage",1,{path:"/",secure:"https:"===window.location.protocol}),c=1*jq.cookie("bp-activity-oldestpage")+1,d=[],jq(".activity-list li.just-posted").each(function(){d.push(jq(this).attr("id").replace("activity-",""))}),load_more_args={action:"activity_get_older_updates",cookie:bp_get_cookies(),page:c,exclude_just_posted:d.join(",")},load_more_search=bp_get_querystring("s"),load_more_search&&(load_more_args.search_terms=load_more_search),bp_ajax_request=jq.post(ajaxurl,load_more_args,function(e){jq("#buddypress li.load-more").removeClass("loading"),jq.cookie("bp-activity-oldestpage",c,{path:"/",secure:"https:"===window.location.protocol}),jq("#buddypress ul.activity-list").append(e.contents),p.parent().hide()},"json"),!1):void(p.parent().hasClass("load-newest")&&(e.preventDefault(),p.parent().hide(),activity_html=jq.parseHTML(newest_activities),jq.each(activity_html,function(e,t){"LI"===t.nodeName&&jq(t).hasClass("just-posted")&&jq("#"+jq(t).attr("id")).length&&jq("#"+jq(t).attr("id")).remove()}),jq("#buddypress ul.activity-list").prepend(newest_activities),newest_activities=""))}),jq("div.activity").on("click",".activity-read-more a",function(e){var t,i,a=jq(e.target),s=a.parent().attr("id").split("-"),n=s[3],o=s[0];return t="acomment"===o?"acomment-content":"activity-inner",i=jq("#"+o+"-"+n+" ."+t+":first"),jq(a).addClass("loading"),jq.post(ajaxurl,{action:"get_single_activity_content",activity_id:n},function(e){jq(i).slideUp(300).html(e).slideDown(300)}),!1}),jq("form.ac-form").hide(),jq(".activity-comments").length&&bp_legacy_theme_hide_comments(),jq("div.activity").on("click",function(e){var t,i,a,s,n,o,r,l,c,d,p,u,h,m,j,v=jq(e.target);return v.hasClass("acomment-reply")||v.parent().hasClass("acomment-reply")?(v.parent().hasClass("acomment-reply")&&(v=v.parent()),t=v.attr("id"),i=t.split("-"),a=i[2],s=v.attr("href").substr(10,v.attr("href").length),(n=jq("#ac-form-"+a)).css("display","none"),n.removeClass("root"),jq(".ac-form").hide(),n.children("div").each(function(){jq(this).hasClass("error")&&jq(this).hide()}),"comment"!==i[1]?jq("#acomment-"+s).append(n):jq("#activity-"+a+" .activity-comments").append(n),n.parent().hasClass("activity-comments")&&n.addClass("root"),n.slideDown(200),jq.scrollTo(n,500,{offset:-100,easing:"swing"}),jq("#ac-form-"+i[2]+" textarea").focus(),!1):"ac_form_submit"===v.attr("name")?(n=v.parents("form"),o=n.parent(),r=n.attr("id").split("-"),l=o.hasClass("activity-comments")?r[2]:o.attr("id").split("-")[1],content=jq("#"+n.attr("id")+" textarea"),jq("#"+n.attr("id")+" div.error").hide(),v.addClass("loading").prop("disabled",!0),content.addClass("loading").prop("disabled",!0),c={action:"new_activity_comment",cookie:bp_get_cookies(),_wpnonce_new_activity_comment:jq("#_wpnonce_new_activity_comment").val(),comment_id:l,form_id:r[2],content:content.val()},(d=jq("#_bp_as_nonce_"+l).val())&&(c["_bp_as_nonce_"+l]=d),jq.post(ajaxurl,c,function(e){if(v.removeClass("loading"),content.removeClass("loading"),e[0]+e[1]==="-1")n.append(jq(e.substr(2,e.length)).hide().fadeIn(200));else{var t=n.parent();n.fadeOut(200,function(){0===t.children("ul").length&&(t.hasClass("activity-comments")?t.prepend("<ul></ul>"):t.append("<ul></ul>"));var i=jq.trim(e);t.children("ul").append(jq(i).hide().fadeIn(200)),n.children("textarea").val(""),t.parent().addClass("has-comments")}),jq("#"+n.attr("id")+" textarea").val(""),u=Number(jq("#activity-"+r[2]+" a.acomment-reply span").html())+1,jq("#activity-"+r[2]+" a.acomment-reply span").html(u),(p=t.parents(".activity-comments").find(".show-all a"))&&p.html(BP_DTheme.show_x_comments.replace("%d",u))}jq(v).prop("disabled",!1),jq(content).prop("disabled",!1)}),!1):v.hasClass("acomment-delete")?(h=v.attr("href"),m=v.parent().parent(),n=m.parents("div.activity-comments").children("form"),j=h.split("_wpnonce="),j=j[1],l=h.split("cid="),l=l[1].split("&"),l=l[0],v.addClass("loading"),jq(".activity-comments ul .error").remove(),m.parents(".activity-comments").append(n),jq.post(ajaxurl,{action:"delete_activity_comment",cookie:bp_get_cookies(),_wpnonce:j,id:l},function(e){if(e[0]+e[1]==="-1")m.prepend(jq(e.substr(2,e.length)).hide().fadeIn(200));else{var t,i,a,s=jq("#"+m.attr("id")+" ul").children("li"),n=0;jq(s).each(function(){jq(this).is(":hidden")||n++}),m.fadeOut(200,function(){m.remove()}),i=(t=jq("#"+m.parents("#activity-stream > li").attr("id")+" a.acomment-reply span")).html()-(1+n),t.html(i),(a=m.parents(".activity-comments").find(".show-all a"))&&a.html(BP_DTheme.show_x_comments.replace("%d",i)),0===i&&jq(m.parents("#activity-stream > li")).removeClass("has-comments")}}),!1):v.hasClass("spam-activity-comment")?(h=v.attr("href"),m=v.parent().parent(),v.addClass("loading"),jq(".activity-comments ul div.error").remove(),m.parents(".activity-comments").append(m.parents(".activity-comments").children("form")),jq.post(ajaxurl,{action:"bp_spam_activity_comment",cookie:encodeURIComponent(document.cookie),_wpnonce:h.split("_wpnonce=")[1],id:h.split("cid=")[1].split("&")[0]},function(e){if(e[0]+e[1]==="-1")m.prepend(jq(e.substr(2,e.length)).hide().fadeIn(200));else{var t,i=jq("#"+m.attr("id")+" ul").children("li"),a=0;jq(i).each(function(){jq(this).is(":hidden")||a++}),m.fadeOut(200),t=m.parents("#activity-stream > li"),jq("#"+t.attr("id")+" a.acomment-reply span").html(jq("#"+t.attr("id")+" a.acomment-reply span").html()-(1+a))}}),!1):v.parent().hasClass("show-all")?(v.parent().addClass("loading"),setTimeout(function(){v.parent().parent().children("li").fadeIn(200,function(){v.parent().remove()})},600),!1):v.hasClass("ac-reply-cancel")?(jq(v).closest(".ac-form").slideUp(200),!1):void 0}),jq(document).keydown(function(e){(e=e||window.event).target?element=e.target:e.srcElement&&(element=e.srcElement),3===element.nodeType&&(element=element.parentNode),!0!==e.ctrlKey&&!0!==e.altKey&&!0!==e.metaKey&&27===(e.keyCode?e.keyCode:e.which)&&"TEXTAREA"===element.tagName&&jq(element).hasClass("ac-input")&&jq(element).parent().parent().parent().slideUp(200)}),jq(".dir-search, .groups-members-search").on("click",function(e){if(!jq(this).hasClass("no-ajax")){var t,i,a,s,n=jq(e.target);return"submit"===n.attr("type")?(t=jq(".item-list-tabs li.selected").attr("id").split("-"),i=t[0],a=null,s=n.parent().find("#"+i+"_search").val(),"groups-members-search"===e.currentTarget.className&&(i="group_members",a="groups/single/members"),bp_filter_request(i,jq.cookie("bp-"+i+"-filter"),jq.cookie("bp-"+i+"-scope"),"div."+i,s,1,jq.cookie("bp-"+i+"-extras"),null,a),!1):void 0}}),jq("div.item-list-tabs").on("click",function(e){if(jq("body").hasClass("type")&&jq("body").hasClass("directory")&&jq(this).addClass("no-ajax"),!jq(this).hasClass("no-ajax")&&!jq(e.target).hasClass("no-ajax")){var t,i,a,s,n,o="SPAN"===e.target.nodeName?e.target.parentNode:e.target,r=jq(o).parent();return"LI"!==r[0].nodeName||r.hasClass("last")?void 0:(t=r.attr("id").split("-"),"activity"!==(i=t[0])&&(a=t[1],s=jq("#"+i+"-order-select select").val(),n=jq("#"+i+"_search").val(),bp_filter_request(i,s,a,"div."+i,n,1,jq.cookie("bp-"+i+"-extras")),!1))}}),jq("li.filter select").change(function(){var e,t,i,a,s,n,o,r;return e=jq(jq(".item-list-tabs li.selected").length?".item-list-tabs li.selected":this),t=e.attr("id").split("-"),i=t[0],a=t[1],s=jq(this).val(),n=!1,o=null,jq(".dir-search input").length&&(n=jq(".dir-search input").val()),(r=jq(".groups-members-search input")).length&&(n=r.val(),i="members",a="groups"),"members"===i&&"groups"===a&&(i="group_members",o="groups/single/members"),"friends"===i&&(i="members"),bp_filter_request(i,s,a,"div."+i,n,1,jq.cookie("bp-"+i+"-extras"),null,o),!1}),jq("#buddypress").on("click",function(e){var t,i,a,s,n,o,r,l,c,d=jq(e.target);return!!d.hasClass("button")||(d.parent().parent().hasClass("pagination")&&!d.parent().parent().hasClass("no-ajax")?!d.hasClass("dots")&&!d.hasClass("current")&&(t=jq(jq(".item-list-tabs li.selected").length?".item-list-tabs li.selected":"li.filter select"),i=t.attr("id").split("-"),a=i[0],s=!1,n=jq(d).closest(".pagination-links").attr("id"),o=null,jq("div.dir-search input").length&&(s=!(s=jq(".dir-search input")).val()&&bp_get_querystring(s.attr("name"))?jq(".dir-search input").prop("placeholder"):s.val()),r=jq(d).hasClass("next")||jq(d).hasClass("prev")?jq(".pagination span.current").html():jq(d).html(),r=Number(r.replace(/\D/g,"")),jq(d).hasClass("next")?r++:jq(d).hasClass("prev")&&r--,(l=jq(".groups-members-search input")).length&&(s=l.val(),a="members"),"members"===a&&"groups"===i[1]&&(a="group_members",o="groups/single/members"),"admin"===a&&jq("body").hasClass("membership-requests")&&(a="requests"),c=-1!==n.indexOf("pag-bottom")?"pag-bottom":null,bp_filter_request(a,jq.cookie("bp-"+a+"-filter"),jq.cookie("bp-"+a+"-scope"),"div."+a,s,r,jq.cookie("bp-"+a+"-extras"),c,o),!1):void 0)}),jq("a.show-hide-new").on("click",function(){return!!jq("#new-topic-post").length&&(jq("#new-topic-post").is(":visible")?jq("#new-topic-post").slideUp(200):jq("#new-topic-post").slideDown(200,function(){jq("#topic_title").focus()}),!1)}),jq("#submit_topic_cancel").on("click",function(){return!!jq("#new-topic-post").length&&(jq("#new-topic-post").slideUp(200),!1)}),jq("#forum-directory-tags a").on("click",function(){return bp_filter_request("forums","tags",jq.cookie("bp-forums-scope"),"div.forums",jq(this).html().replace(/&nbsp;/g,"-"),1,jq.cookie("bp-forums-extras")),!1}),jq("#send-invite-form").on("click","#invite-list input",function(){var e,t,i=jq("#send-invite-form > .invite").length;jq(".ajax-loader").toggle(),i&&jq(this).parents("ul").find("input").prop("disabled",!0),e=jq(this).val(),t=!0===jq(this).prop("checked")?"invite":"uninvite",i||jq(".item-list-tabs li.selected").addClass("loading"),jq.post(ajaxurl,{action:"groups_invite_user",friend_action:t,cookie:bp_get_cookies(),_wpnonce:jq("#_wpnonce_invite_uninvite_user").val(),friend_id:e,group_id:jq("#group_id").val()},function(a){jq("#message")&&jq("#message").hide(),i?bp_filter_request("invite","bp-invite-filter","bp-invite-scope","div.invite",!1,1,"","",""):(jq(".ajax-loader").toggle(),"invite"===t?jq("#friend-list").append(a):"uninvite"===t&&jq("#friend-list li#uid-"+e).remove(),jq(".item-list-tabs li.selected").removeClass("loading"))})}),jq("#send-invite-form").on("click","a.remove",function(){var e=jq("#send-invite-form > .invite").length,t=jq(this).attr("id");return jq(".ajax-loader").toggle(),t=t.split("-"),t=t[1],jq.post(ajaxurl,{action:"groups_invite_user",friend_action:"uninvite",cookie:bp_get_cookies(),_wpnonce:jq("#_wpnonce_invite_uninvite_user").val(),friend_id:t,group_id:jq("#group_id").val()},function(i){e?bp_filter_request("invite","bp-invite-filter","bp-invite-scope","div.invite",!1,1,"","",""):(jq(".ajax-loader").toggle(),jq("#friend-list #uid-"+t).remove(),jq("#invite-list #f-"+t).prop("checked",!1))}),!1}),jq(".visibility-toggle-link").on("click",function(e){e.preventDefault(),jq(this).attr("aria-expanded","true").parent().hide().addClass("field-visibility-settings-hide").siblings(".field-visibility-settings").show().addClass("field-visibility-settings-open")}),jq(".field-visibility-settings-close").on("click",function(e){e.preventDefault(),jq(".visibility-toggle-link").attr("aria-expanded","false");var t=jq(this).parent(),i=t.find("input:checked").parent().text();t.hide().removeClass("field-visibility-settings-open").siblings(".field-visibility-settings-toggle").children(".current-visibility-level").text(i).end().show().removeClass("field-visibility-settings-hide")}),jq("#profile-edit-form input:not(:submit), #profile-edit-form textarea, #profile-edit-form select, #signup_form input:not(:submit), #signup_form textarea, #signup_form select").change(function(){var e=!0;jq("#profile-edit-form input:submit, #signup_form input:submit").on("click",function(){e=!1}),window.onbeforeunload=function(t){if(e)return BP_DTheme.unsaved_changes}}),jq("#friend-list a.accept, #friend-list a.reject").on("click",function(){var e,t=jq(this),i=jq(this).parents("#friend-list li"),a=jq(this).parents("li div.action"),s=i.attr("id").substr(11,i.attr("id").length),n=t.attr("href").split("_wpnonce=")[1];return!jq(this).hasClass("accepted")&&!jq(this).hasClass("rejected")&&(jq(this).hasClass("accept")?(e="accept_friendship",a.children("a.reject").css("visibility","hidden")):(e="reject_friendship",a.children("a.accept").css("visibility","hidden")),t.addClass("loading"),jq.post(ajaxurl,{action:e,cookie:bp_get_cookies(),id:s,_wpnonce:n},function(e){t.removeClass("loading"),e[0]+e[1]==="-1"?(i.prepend(e.substr(2,e.length)),i.children("#message").hide().fadeIn(200)):t.fadeOut(100,function(){jq(this).hasClass("accept")?(a.children("a.reject").hide(),jq(this).html(BP_DTheme.accepted).contents().unwrap()):(a.children("a.accept").hide(),jq(this).html(BP_DTheme.rejected).contents().unwrap())})}),!1)}),jq("#members-dir-list, #members-group-list, #item-header").on("click",".friendship-button a",function(){jq(this).parent().addClass("loading");var e=jq(this).attr("id"),t=jq(this).attr("href"),i=jq(this);return e=e.split("-"),e=e[1],t=t.split("?_wpnonce="),t=t[1].split("&"),t=t[0],jq.post(ajaxurl,{action:"addremove_friend",cookie:bp_get_cookies(),fid:e,_wpnonce:t},function(e){var t=i.attr("rel");parentdiv=i.parent(),"add"===t?jq(parentdiv).fadeOut(200,function(){parentdiv.removeClass("add_friend"),parentdiv.removeClass("loading"),parentdiv.addClass("pending_friend"),parentdiv.fadeIn(200).html(e)}):"remove"===t&&jq(parentdiv).fadeOut(200,function(){parentdiv.removeClass("remove_friend"),parentdiv.removeClass("loading"),parentdiv.addClass("add"),parentdiv.fadeIn(200).html(e)})}),!1}),jq("#buddypress").on("click",".group-button .leave-group",function(){if(!1===confirm(BP_DTheme.leave_group_confirm))return!1}),jq("#groups-dir-list").on("click",".group-button a",function(){var e=jq(this).parent().attr("id"),t=jq(this).attr("href"),i=jq(this);return e=e.split("-"),e=e[1],t=t.split("?_wpnonce="),t=t[1].split("&"),t=t[0],(!i.hasClass("leave-group")||!1!==confirm(BP_DTheme.leave_group_confirm))&&(jq.post(ajaxurl,{action:"joinleave_group",cookie:bp_get_cookies(),gid:e,_wpnonce:t},function(e){var t=i.parent();jq("body.directory").length?jq(t).fadeOut(200,function(){t.fadeIn(200).html(e);var a=jq("#groups-personal span"),s=1;i.hasClass("leave-group")?(t.hasClass("hidden")&&t.closest("li").slideUp(200),s=0):i.hasClass("request-membership")&&(s=!1),a.length&&!1!==s&&(s?a.text(1+(a.text()>>0)):a.text((a.text()>>0)-1))}):window.location.reload()}),!1)}),jq("#groups-list li.hidden").each(function(){"none"===jq(this).css("display")&&jq(this).css("cssText","display: list-item !important")}),jq("#buddypress").on("click",".pending",function(){return!1}),jq("body").hasClass("register")){var a=jq("#signup_with_blog");a.prop("checked")||jq("#blog-details").toggle(),a.change(function(){jq("#blog-details").toggle()})}jq(".message-search").on("click",function(e){if(!jq(this).hasClass("no-ajax")){var t,i=jq(e.target);return"submit"===i.attr("type")||"button"===i.attr("type")?(t="messages",bp_filter_request(t,jq.cookie("bp-"+t+"-filter"),jq.cookie("bp-"+t+"-scope"),"div."+t,jq("#messages_search").val(),1,jq.cookie("bp-"+t+"-extras")),!1):void 0}}),jq("#send_reply_button").click(function(){var e=jq("#messages_order").val()||"ASC",t=jq("#message-recipients").offset(),i=jq("#send_reply_button");return jq(i).addClass("loading"),jq.post(ajaxurl,{action:"messages_send_reply",cookie:bp_get_cookies(),_wpnonce:jq("#send_message_nonce").val(),content:jq("#message_content").val(),send_to:jq("#send_to").val(),subject:jq("#subject").val(),thread_id:jq("#thread_id").val()},function(a){a[0]+a[1]==="-1"?jq("#send-reply").prepend(a.substr(2,a.length)):(jq("#send-reply #message").remove(),jq("#message_content").val(""),"ASC"===e?jq("#send-reply").before(a):(jq("#message-recipients").after(a),jq(window).scrollTop(t.top)),jq(".new-message").hide().slideDown(200,function(){jq(".new-message").removeClass("new-message")})),jq(i).removeClass("loading")}),!1}),jq("body.messages #item-body div.messages").on("change","#message-type-select",function(){var e=this.value,t=jq('td input[type="checkbox"]'),i="checked";switch(t.each(function(e){t[e].checked=""}),e){case"unread":t=jq('tr.unread td input[type="checkbox"]');break;case"read":t=jq('tr.read td input[type="checkbox"]');break;case"":i=""}t.each(function(e){t[e].checked=i})}),jq("#select-all-messages").click(function(e){this.checked?jq(".message-check").each(function(){this.checked=!0}):jq(".message-check").each(function(){this.checked=!1})}),jq("#messages-bulk-manage").attr("disabled","disabled"),jq("#messages-select").on("change",function(){jq("#messages-bulk-manage").attr("disabled",jq(this).val().length<=0)}),starAction=function(){var e=jq(this);return jq.post(ajaxurl,{action:"messages_star",message_id:e.data("message-id"),star_status:e.data("star-status"),nonce:e.data("star-nonce"),bulk:e.data("star-bulk")},function(t){1===parseInt(t,10)&&("unstar"===e.data("star-status")?(e.data("star-status","star"),e.removeClass("message-action-unstar").addClass("message-action-star"),e.find(".bp-screen-reader-text").text(BP_PM_Star.strings.text_star),1===BP_PM_Star.is_single_thread?e.attr("data-bp-tooltip",BP_PM_Star.strings.title_star):e.attr("data-bp-tooltip",BP_PM_Star.strings.title_star_thread)):(e.data("star-status","unstar"),e.removeClass("message-action-star").addClass("message-action-unstar"),e.find(".bp-screen-reader-text").text(BP_PM_Star.strings.text_unstar),1===BP_PM_Star.is_single_thread?e.attr("data-bp-tooltip",BP_PM_Star.strings.title_unstar):e.attr("data-bp-tooltip",BP_PM_Star.strings.title_unstar_thread)))}),!1},jq("#message-threads").on("click","td.thread-star a",starAction),jq("#message-thread").on("click",".message-star-actions a",starAction),jq("#message-threads td.bulk-select-check :checkbox").on("change",function(){var e=jq(this),t=e.closest("tr").find(".thread-star a");e.prop("checked")?"unstar"===t.data("star-status")?BP_PM_Star.star_counter++:BP_PM_Star.unstar_counter++:"unstar"===t.data("star-status")?BP_PM_Star.star_counter--:BP_PM_Star.unstar_counter--,BP_PM_Star.star_counter>0&&0===parseInt(BP_PM_Star.unstar_counter,10)?jq('option[value="star"]').hide():jq('option[value="star"]').show(),BP_PM_Star.unstar_counter>0&&0===parseInt(BP_PM_Star.star_counter,10)?jq('option[value="unstar"]').hide():jq('option[value="unstar"]').show()}),jq("#select-all-notifications").click(function(e){this.checked?jq(".notification-check").each(function(){this.checked=!0}):jq(".notification-check").each(function(){this.checked=!1})}),jq("#notification-bulk-manage").attr("disabled","disabled"),jq("#notification-select").on("change",function(){jq("#notification-bulk-manage").attr("disabled",jq(this).val().length<=0)}),jq("#close-notice").on("click",function(){return jq(this).addClass("loading"),jq("#sidebar div.error").remove(),jq.post(ajaxurl,{action:"messages_close_notice",notice_id:jq(".notice").attr("rel").substr(2,jq(".notice").attr("rel").length),nonce:jq("#close-notice-nonce").val()},function(e){jq("#close-notice").removeClass("loading"),e[0]+e[1]==="-1"?(jq(".notice").prepend(e.substr(2,e.length)),jq("#sidebar div.error").hide().fadeIn(200)):jq(".notice").slideUp(100)}),!1}),jq("#wp-admin-bar ul.main-nav li, #nav li").mouseover(function(){jq(this).addClass("sfhover")}),jq("#wp-admin-bar ul.main-nav li, #nav li").mouseout(function(){jq(this).removeClass("sfhover")}),jq("#wp-admin-bar-logout, a.logout").on("click",function(){jq.removeCookie("bp-activity-scope",{path:"/",secure:"https:"===window.location.protocol}),jq.removeCookie("bp-activity-filter",{path:"/",secure:"https:"===window.location.protocol}),jq.removeCookie("bp-activity-oldestpage",{path:"/",secure:"https:"===window.location.protocol});var e=["members","groups","blogs","forums"];jq(e).each(function(t){jq.removeCookie("bp-"+e[t]+"-scope",{path:"/",secure:"https:"===window.location.protocol}),jq.removeCookie("bp-"+e[t]+"-filter",{path:"/",secure:"https:"===window.location.protocol}),jq.removeCookie("bp-"+e[t]+"-extras",{path:"/",secure:"https:"===window.location.protocol})})}),jq("body").hasClass("no-js")&&jq("body").attr("class",jq("body").attr("class").replace(/no-js/,"js")),"undefined"!=typeof wp&&void 0!==wp.heartbeat&&void 0!==BP_DTheme.pulse&&(wp.heartbeat.interval(Number(BP_DTheme.pulse)),jq.fn.extend({"heartbeat-send":function(){return this.bind("heartbeat-send.buddypress")}}));var s=0;jq(document).on("heartbeat-send.buddypress",function(e,t){s=0,jq("#buddypress ul.activity-list li").first().prop("id")&&(timestamp=jq("#buddypress ul.activity-list li").first().prop("class").match(/date-recorded-([0-9]+)/),timestamp&&(s=timestamp[1])),(0===activity_last_recorded||Number(s)>activity_last_recorded)&&(activity_last_recorded=Number(s)),t.bp_activity_last_recorded=activity_last_recorded,last_recorded_search=bp_get_querystring("s"),last_recorded_search&&(t.bp_activity_last_recorded_search_terms=last_recorded_search)}),jq(document).on("heartbeat-tick",function(e,t){t.bp_activity_newest_activities&&(newest_activities=t.bp_activity_newest_activities.activities+newest_activities,activity_last_recorded=Number(t.bp_activity_newest_activities.last_recorded),jq("#buddypress ul.activity-list li").first().hasClass("load-newest")||jq("#buddypress ul.activity-list").prepend('<li class="load-newest"><a href="#newest">'+BP_DTheme.newest+"</a></li>"))})});
;jQuery(function(t){if("undefined"==typeof wc_add_to_cart_params)return!1;var a=function(){t(document.body).on("click",".add_to_cart_button",this.onAddToCart).on("click",".remove_from_cart_button",this.onRemoveFromCart).on("added_to_cart",this.updateButton).on("added_to_cart",this.updateCartPage).on("added_to_cart removed_from_cart",this.updateFragments)};a.prototype.onAddToCart=function(a){var o=t(this);if(o.is(".ajax_add_to_cart")){if(!o.attr("data-product_id"))return!0;a.preventDefault(),o.removeClass("added"),o.addClass("loading");var r={};t.each(o.data(),function(t,a){r[t]=a}),t(document.body).trigger("adding_to_cart",[o,r]),t.post(wc_add_to_cart_params.wc_ajax_url.toString().replace("%%endpoint%%","add_to_cart"),r,function(a){a&&(a.error&&a.product_url?window.location=a.product_url:"yes"!==wc_add_to_cart_params.cart_redirect_after_add?t(document.body).trigger("added_to_cart",[a.fragments,a.cart_hash,o]):window.location=wc_add_to_cart_params.cart_url)})}},a.prototype.onRemoveFromCart=function(a){var o=t(this),r=o.closest(".woocommerce-mini-cart-item");a.preventDefault(),r.block({message:null,overlayCSS:{opacity:.6}}),t.post(wc_add_to_cart_params.wc_ajax_url.toString().replace("%%endpoint%%","remove_from_cart"),{cart_item_key:o.data("cart_item_key")},function(a){a&&a.fragments?t(document.body).trigger("removed_from_cart",[a.fragments,a.cart_hash]):window.location=o.attr("href")}).fail(function(){window.location=o.attr("href")})},a.prototype.updateButton=function(a,o,r,e){(e=void 0!==e&&e)&&(e.removeClass("loading"),e.addClass("added"),wc_add_to_cart_params.is_cart||0!==e.parent().find(".added_to_cart").length||e.after(' <a href="'+wc_add_to_cart_params.cart_url+'" class="added_to_cart wc-forward" title="'+wc_add_to_cart_params.i18n_view_cart+'">'+wc_add_to_cart_params.i18n_view_cart+"</a>"),t(document.body).trigger("wc_cart_button_updated",[e]))},a.prototype.updateCartPage=function(){var a=window.location.toString().replace("add-to-cart","added-to-cart");t(".shop_table.cart").load(a+" .shop_table.cart:eq(0) > *",function(){t(".shop_table.cart").stop(!0).css("opacity","1").unblock(),t(document.body).trigger("cart_page_refreshed")}),t(".cart_totals").load(a+" .cart_totals:eq(0) > *",function(){t(".cart_totals").stop(!0).css("opacity","1").unblock(),t(document.body).trigger("cart_totals_refreshed")})},a.prototype.updateFragments=function(a,o){o&&(t.each(o,function(a){t(a).addClass("updating").fadeTo("400","0.6").block({message:null,overlayCSS:{opacity:.6}})}),t.each(o,function(a,o){t(a).replaceWith(o),t(a).stop(!0).css("opacity","1").unblock()}),t(document.body).trigger("wc_fragments_loaded"))},new a});